# Typecho 访客统计插件-VisitorLogger-Pro
这是一个为 Typecho 博客系统开发的访客统计插件，基于原版的VistorLogger修改版本。该插件提供了详细的访问统计功能，包括访问国家/地区统计、IP分布等信息，并进行了隐私保护处理。


## 功能特点

- 访问国家/地区统计（Top 20）
- IP分布统计（已匿名化处理）
- 日期筛选功能
- 多种图表展示方式（环形图、玫瑰图、3D图）
- 列表视图支持
- 移动端适配
- 隐私保护（IP地址匿名化）
- 管理员访问自动排除
![image](https://github.com/user-attachments/assets/b74c1ec0-70e9-40e8-b8a7-8bf831d2b266)
![image](https://github.com/user-attachments/assets/1e4043d7-09f5-4a20-a64b-0c5bd09e357d)
![image](https://github.com/user-attachments/assets/0179b928-f60c-4dd2-9008-fe0f23efa2f4)
![image](https://github.com/user-attachments/assets/911a541e-1ca5-44a7-a188-e9ca9b5cd5eb)


  

## 安装方法

1. 下载插件文件
2. 在本地解压后把目录名改为VisitorLoggerPro
3. 将改后的文件上传到/usr/plugins目录下
4. 插件名为VisitorLoggerPro
5. 在 Typecho 后台启用插件
6. 要把该文件`visitor-stats.php`移动到handsome主题根目录（handsome主题专用）

## 使用说明

### 基本使用

1. 在 Typecho 后台创建新页面
2. 在页面模板中选择"访客统计"
3. 发布页面即可看到统计效果
4. 创建新页面，选择"访客统计"模板

### 功能说明

#### 日期筛选
- 可以选择特定时间范围查看统计数据
- 支持快捷选择（今天、最近7天、最近30天、全部）
- 支持日期范围选择器

#### 图表展示
- 支持三种图表样式：环形图、玫瑰图、3D图
- 可以切换列表视图查看详细数据
- 图表区域自适应调整

#### 数据说明
- 统计数据已进行匿名化处理，保护访客隐私
- 自动排除管理员访问记录
- 显示访问次数和占比信息

#### 后台功能
- 支持删除特定IP记录（支持模糊匹配）
- 提供省份访问统计图表
- 路由访问统计分析

## 隐私保护

本插件已实现以下隐私保护措施：
- IP地址匿名化处理（只显示前两段）
- 明确的隐私声明
- 符合相关法律法规要求

## 技术实现

- 前端：ECharts 图表库
- 后端：PHP + MySQL
- 数据存储：Typecho 数据库
- 数据处理：通过API异步加载，提高性能

## 作者信息

- 作者：BXCQ
- 博客：https://blog.ybyq.wang/
- GitHub：https://github.com/BXCQ

## 许可证

MIT License

## 更新日志

### v2.1.1 (2024-06-22)
- 优化：移除本地chart.js文件，全部使用CDN加载图表库
- 改进：减少插件体积，优化页面加载速度
- 修复：删除冗余代码引用，提高代码整洁度

### v2.1.0 (2024-06-20)
- 前台优化：
  - 新增API端点处理数据聚合，解决大数据量加载问题
  - 添加日期范围选择器和快捷按钮（今天、最近7天、最近30天、全部）
  - 实现按钮选中状态高亮显示
  - 优化首次加载速度，默认只加载当天数据
  - 增高环形图展示区域，改善视觉效果
  - 修复图表悬停效果

- 后台优化：
  - 添加删除特定IP记录功能（支持模糊匹配）
  - 重构图表加载逻辑，使用异步API获取数据
  - 添加省份访问统计图表
  - 优化后台路由统计，解决X轴信息重叠问题
  - 优化日期选择功能

### v2.0.1 (2024-06-15)
- 修复时区问题：将数据库time字段从TIMESTAMP改为DATETIME类型
- 添加时区自动转换功能，确保访客时间记录准确
- 优化数据迁移处理，自动转换已有记录的时区

### v2.0.0 (2024-04-23)
- 初始版本发布
- 实现基本统计功能
- 添加隐私保护措施
- 优化移动端显示
